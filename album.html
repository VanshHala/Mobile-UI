<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Album</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: #f5f5f5;
            color: #000;
        }

        header {
            background: black;
            color: white;
            text-align: center;
            padding: 24px 0;
        }

        h1 {
            margin: 0;
            font-size: 28px;
        }

        .gallery {
            display: flex;
            flex-wrap: wrap;
            width: 1000px;
            gap: 16px;
            padding: 16px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .ph {
            background: white;
            width: 322px;
            justify-content: space-evenly;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .ph img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }

        .ph-info {
            padding: 12px;
        }

        .ph-info h3 {
            margin: 0 0 5px 0;
            font-size: 16px;
        }

        .ph-info p {
            margin: 0;
            color: #666;
            font-size: 13px;
        }

        .action-buttons {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .action-buttons button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: black;
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
        }

        #undo-btn {
            background: #d9534f;
            display: none;
        }

        .m {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            color: #000;
            padding: 20px;
            border-radius: 5px;
            width: 100%;
            max-width: 300px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }

        .m input {
            width: calc(100% - 16px);
            padding: 8px;
            margin: 5px 0px;
            border: 1px solid #aaa;
            border-radius: 3px;
        }

        .m button {
            padding: 8px 15px;
            margin: 5px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }

        #s {
            background: black;
            color: white;
        }

        #c {
            background: white;
            color: black;
        }
    </style>
</head>

<body>
    <header>
        <h1>Gallery</h1>
    </header>
    <div class="gallery" id="gallery">
        <div class="ph"> <img
                src="https://images.pexels.com/photos/167699/pexels-photo-167699.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1">
            <div class="ph-info">
                <h3>Misty Forest</h3>
                <p>September 3, 2023</p>
            </div>
        </div>
        <div class="ph"> <img
                src="https://images.pexels.com/photos/36717/amazing-animal-beautiful-beautifull.jpg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1">
            <div class="ph-info">
                <h3>Wildlife</h3>
                <p>October 15, 2023</p>
            </div>
        </div>
        <div class="ph"> <img
                src="https://images.pexels.com/photos/210186/pexels-photo-210186.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1">
            <div class="ph-info">
                <h3>Mountain View</h3>
                <p>June 12, 2023</p>
            </div>
        </div>
    </div>
    <div class="action-buttons">
        <button id="undo-btn" onclick="undoAdd()">â†¶</button>
        <button id="add-btn" onclick="om()">+</button>
    </div>
    <div class="m" id="m">
        <h2>Add Photo</h2>
        <input type="file" id="pic" accept="image/*" required>
        <input type="text" id="n" placeholder="Enter Picture Description">
        <input type="date" id="num">
        <div style="text-align: right;">
            <button id="c" onclick="cm()">Cancel</button>
            <button id="s" onclick="ac()">Save</button>
        </div>
    </div>
    <script>
        class Stack{
            constructor(){
                this.items = [];
            }
            push(element){
                this.items.push(element);
            }
            pop() { if (this.isEmpty()) { return null; } return this.items.pop(); }
            peek() { if (this.isEmpty()) { return null; } return this.items[this.items.length - 1]; }
            isEmpty() { return this.items.length === 0; }
        }
        const photoHistoryStack = new Stack();
        const undoBtn = document.getElementById("undo-btn");

        function om() { document.getElementById("m").style.display = "block"; }
        function cm() {
            document.getElementById("m").style.display = "none";
            document.getElementById("pic").value = "";
            document.getElementById("n").value = "";
            document.getElementById("num").value = "";
        }
        function ac() {
            var photoInput = document.getElementById("pic");
            var n = document.getElementById("n").value.trim();
            var num = document.getElementById("num").value.trim();
            if (!photoInput.files || photoInput.files.length === 0) { alert("Please select an image file"); return; }
            if (!n || !num) { alert("Please fill both description and date fields"); return; }
            const file = photoInput.files[0];
            const reader = new FileReader();
            reader.onload = function (e) {
                const gallery = document.getElementById("gallery");
                const newPhoto = document.createElement("div");
                newPhoto.className = "ph";
                newPhoto.innerHTML = `
                    <img src="${e.target.result}">
                    <div class="ph-info"><h3>${n}</h3><p>${formatDate(num)}</p></div>
                `;

                gallery.prepend(newPhoto);

                photoHistoryStack.push(newPhoto);
                undoBtn.style.display = "block";
                cm();
            };
            reader.readAsDataURL(file);
        }

        function undoAdd() {
            if (photoHistoryStack.isEmpty()) { alert("Nothing to undo!"); return; }
            const lastAddedPhoto = photoHistoryStack.pop();
            if (lastAddedPhoto) { lastAddedPhoto.remove(); }
            if (photoHistoryStack.isEmpty()) { undoBtn.style.display = "none"; }
        }

        function formatDate(dateString) {
            let date = new Date(dateString);
            let year = date.getFullYear();
            let monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            let month = monthNames[date.getMonth()];
            let day = date.getDate() + 1;
            return month + " " + day + ", " + year;
        }
    </script>
</body>

</html>